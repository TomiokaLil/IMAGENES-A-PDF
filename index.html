<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Convertir ImÃ¡genes a PDF</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' fill='%23a96dff'/></svg>">
<style>
  body {
    font-family: "Poppins", sans-serif;
    margin: 0;
    min-height: 100vh;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #fff;
  }
  h1 {
    margin-top: 20px;
    font-weight: 500;
    animation: float 3s ease-in-out infinite;
  }
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
  .container {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    box-shadow: 0 4px 30px rgba(0,0,0,0.2);
    backdrop-filter: blur(10px);
    padding: 20px;
    margin: 30px 0;
    width: 90%;
    max-width: 500px;
    text-align: center;
  }
  input[type=file] {
    display: none;
  }
  label {
    background: #fff;
    color: #333;
    padding: 10px 20px;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
  }
  label:hover {
    background: #f1f1f1;
  }
  #preview {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
  }
  #preview img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 10px;
    box-shadow: 0 0 8px rgba(0,0,0,0.3);
  }
  button {
    background: #fff;
    border: none;
    color: #333;
    padding: 10px 25px;
    margin: 10px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
  }
  button:hover {
    transform: scale(1.05);
    background: #f1f1f1;
  }
  footer {
    margin: 20px 0;
    font-size: 0.9em;
    opacity: 0.9;
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); color: #fff; }
    50% { transform: scale(1.1); color: #ffb6ff; }
  }
  #loader {
    display: none;
    font-size: 1.1em;
    margin-top: 10px;
    animation: heartbeat 1.5s infinite;
  }
  @keyframes heartbeat {
    0%, 100% { transform: scale(1); color: #fff; }
    50% { transform: scale(1.3); color: #ff80ff; }
  }
</style>
</head>
<body>
  <h1>Hecho con amor para mi amada mujer ðŸ’•</h1>

  <div class="container">
    <label for="file-input">Seleccionar ImÃ¡genes</label>
    <input type="file" id="file-input" multiple accept="image/*" />
    <div id="preview"></div>
    <button id="generate-btn">Generar PDF</button>
    <button id="reset-btn">Empezar de nuevo ðŸ”„</button>
    <div id="loader">ðŸ’– Creando tu PDF con amor...</div>
  </div>

  <footer>Â© 2025 | Creado con ðŸ’™ y pasiÃ³n</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const input = document.getElementById("file-input");
  const preview = document.getElementById("preview");
  const generateBtn = document.getElementById("generate-btn");
  const resetBtn = document.getElementById("reset-btn");
  const loader = document.getElementById("loader");

  let images = [];

  input.addEventListener("change", (e) => {
    images = Array.from(e.target.files);
    preview.innerHTML = "";
    images.forEach(file => {
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = document.createElement("img");
        img.src = event.target.result;
        preview.appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });

  resetBtn.addEventListener("click", () => {
    input.value = "";
    images = [];
    preview.innerHTML = "";
  });

  generateBtn.addEventListener("click", async () => {
    if (images.length === 0) {
      alert("Selecciona algunas imÃ¡genes primero ðŸ’–");
      return;
    }

    loader.style.display = "block";
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF({ orientation: "portrait", unit: "px", format: "a4" });

    for (let i = 0; i < images.length; i++) {
      const imgData = await compressImage(images[i], 1280, 0.7);
      const img = new Image();
      img.src = imgData;

      await new Promise(resolve => {
        img.onload = () => {
          const pageWidth = pdf.internal.pageSize.getWidth();
          const pageHeight = pdf.internal.pageSize.getHeight();
          const ratio = Math.min(pageWidth / img.width, pageHeight / img.height);
          const imgWidth = img.width * ratio;
          const imgHeight = img.height * ratio;
          const x = (pageWidth - imgWidth) / 2;
          const y = (pageHeight - imgHeight) / 2;
          pdf.addImage(imgData, "JPEG", x, y, imgWidth, imgHeight);
          if (i < images.length - 1) pdf.addPage();
          resolve();
        };
      });
    }

    loader.style.display = "none";
    pdf.save("imagenes.pdf");
  });

  async function compressImage(file, maxSize, quality) {
    return new Promise((resolve) => {
      const reader = new FileReader();
      reader.onload = (event) => {
        const img = new Image();
        img.onload = () => {
          const canvas = document.createElement("canvas");
          let width = img.width;
          let height = img.height;
          if (width > height) {
            if (width > maxSize) {
              height *= maxSize / width;
              width = maxSize;
            }
          } else {
            if (height > maxSize) {
              width *= maxSize / height;
              height = maxSize;
            }
          }
          canvas.width = width;
          canvas.height = height;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0, 0, width, height);
          resolve(canvas.toDataURL("image/jpeg", quality));
        };
        img.src = event.target.result;
      };
      reader.readAsDataURL(file);
    });
  }
</script>
</body>
</html>
